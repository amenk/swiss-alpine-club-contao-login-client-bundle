services:

  Markocupic\SwissAlpineClubContaoLoginClientBundle\Controller\Authentication\AuthenticationController:
    public: true
    arguments:
      - '@contao.framework'
      - '@Markocupic\SwissAlpineClubContaoLoginClientBundle\Initializer'
      - '@request_stack'
      - '@Markocupic\SwissAlpineClubContaoLoginClientBundle\Validator\LoginValidator'
      - '@Markocupic\SwissAlpineClubContaoLoginClientBundle\User\ContaoUserFactory'
      - '@Markocupic\SwissAlpineClubContaoLoginClientBundle\InteractiveLogin\InteractiveLogin'
      - '@Markocupic\SwissAlpineClubContaoLoginClientBundle\Oidc\Oidc'
      - '@event_dispatcher'
      - '@monolog.logger.contao'
    calls:
      - [ 'setContainer', [ '@Psr\Container\ContainerInterface' ] ]

  Markocupic\SwissAlpineClubContaoLoginClientBundle\Initializer:
    arguments:
      - '@contao.framework'
      - '@request_stack'
      - '@contao.csrf.token_manager'

  Markocupic\SwissAlpineClubContaoLoginClientBundle\Oidc\Oidc:
    arguments:
      - '@contao.framework'
      - '@request_stack'

  Markocupic\SwissAlpineClubContaoLoginClientBundle\InteractiveLogin\InteractiveLogin:
    arguments:
      - '@contao.framework'
      - '@security.token_storage'
      - '@event_dispatcher'
      - '@request_stack'
      - '@monolog.logger.contao'

  Markocupic\SwissAlpineClubContaoLoginClientBundle\User\ContaoUserFactory:
    arguments:
      - '@contao.framework'
      - '@translator'
      - '@security.password_hasher_factory'
      - '@Markocupic\SwissAlpineClubContaoLoginClientBundle\Validator\LoginValidator'
      - '@Markocupic\SwissAlpineClubContaoLoginClientBundle\ErrorMessage\ErrorMessageManager'

  Markocupic\SwissAlpineClubContaoLoginClientBundle\Validator\LoginValidator:
    arguments:
      - '@contao.framework'
      - '@translator'
      - '@Markocupic\SwissAlpineClubContaoLoginClientBundle\ErrorMessage\ErrorMessageManager'

  Markocupic\SwissAlpineClubContaoLoginClientBundle\ErrorMessage\ErrorMessageManager:
    arguments:
      - '%sac_oauth2_client.session.flash_bag_key%'
      - '@request_stack'

  Markocupic\SwissAlpineClubContaoLoginClientBundle\Session\Attribute\ArrayAttributeBag:
    arguments:
      - '%sac_oauth2_client.session.attribute_bag_key%'
    calls:
      - [ 'setName', [ '%sac_oauth2_client.session.attribute_bag_name%' ] ]
